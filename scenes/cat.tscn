[gd_scene load_steps=29 format=3 uid="uid://cphwv4vaft32m"]

[ext_resource type="Script" uid="uid://boa32aqpnte2d" path="res://scripts/cat.gd" id="1_se5fe"]
[ext_resource type="Texture2D" uid="uid://xkqjguj08h7s" path="res://assets/sprites/explosion.png" id="2_kedyd"]
[ext_resource type="Script" uid="uid://g8b2aw3dn7e" path="res://scripts/state_machine.gd" id="2_se5fe"]
[ext_resource type="Script" uid="uid://c5ddufvbbox2a" path="res://scripts/states/CatIdle.gd" id="3_t8pth"]
[ext_resource type="Script" uid="uid://br5t2hcrc517h" path="res://scripts/states/CatRest.gd" id="4_cxap7"]
[ext_resource type="Script" uid="uid://cvjrvysg6a8vi" path="res://scripts/states/CatMove.gd" id="5_tol8a"]
[ext_resource type="Script" uid="uid://co8kt33erkkw1" path="res://scripts/states/CatJump.gd" id="6_8px16"]
[ext_resource type="Script" uid="uid://dng8exwii4i35" path="res://scripts/states/CatAscend.gd" id="7_kedyd"]
[ext_resource type="Script" uid="uid://d4mrj0paa7rf2" path="res://scripts/states/CatLand.gd" id="8_v4p53"]
[ext_resource type="Script" uid="uid://nrxrumugwxxb" path="res://scripts/states/CatFall.gd" id="9_32af4"]

[sub_resource type="RectangleShape2D" id="RectangleShape2D_c0fbc"]
size = Vector2(26, 25)

[sub_resource type="AtlasTexture" id="AtlasTexture_j2mit"]
atlas = ExtResource("2_kedyd")
region = Rect2(0, 0, 64, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_mw1oh"]
atlas = ExtResource("2_kedyd")
region = Rect2(64, 0, 64, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_yemdv"]
atlas = ExtResource("2_kedyd")
region = Rect2(128, 0, 64, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_xrsg2"]
atlas = ExtResource("2_kedyd")
region = Rect2(192, 0, 64, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_hxs5g"]
atlas = ExtResource("2_kedyd")
region = Rect2(0, 64, 64, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_ni0ed"]
atlas = ExtResource("2_kedyd")
region = Rect2(64, 64, 64, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_j8f8h"]
atlas = ExtResource("2_kedyd")
region = Rect2(128, 64, 64, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_jqt8d"]
atlas = ExtResource("2_kedyd")
region = Rect2(192, 64, 64, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_6kegj"]
atlas = ExtResource("2_kedyd")
region = Rect2(0, 128, 64, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_5fbms"]
atlas = ExtResource("2_kedyd")
region = Rect2(64, 128, 64, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_hxgsl"]
atlas = ExtResource("2_kedyd")
region = Rect2(128, 128, 64, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_vheay"]
atlas = ExtResource("2_kedyd")
region = Rect2(192, 128, 64, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_ewnib"]
atlas = ExtResource("2_kedyd")
region = Rect2(0, 192, 64, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_phqlu"]
atlas = ExtResource("2_kedyd")
region = Rect2(64, 192, 64, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_131he"]
atlas = ExtResource("2_kedyd")
region = Rect2(128, 192, 64, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_afktd"]
atlas = ExtResource("2_kedyd")
region = Rect2(192, 192, 64, 64)

[sub_resource type="SpriteFrames" id="SpriteFrames_v4p53"]
animations = [{
"frames": [{
"duration": 1.0,
"texture": null
}, {
"duration": 2.0,
"texture": SubResource("AtlasTexture_j2mit")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_mw1oh")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_yemdv")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_xrsg2")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_hxs5g")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_ni0ed")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_j8f8h")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_jqt8d")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_6kegj")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_5fbms")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_hxgsl")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_vheay")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_ewnib")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_phqlu")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_131he")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_afktd")
}, {
"duration": 1.0,
"texture": null
}],
"loop": false,
"name": &"explode",
"speed": 30.0
}]

[node name="Cat" type="CharacterBody2D"]
z_index = 5
disable_mode = 1
collision_layer = 2
script = ExtResource("1_se5fe")

[node name="CollisionShape2D" type="CollisionShape2D" parent="."]
position = Vector2(0, 4.5)
shape = SubResource("RectangleShape2D_c0fbc")

[node name="GroundDetector" type="RayCast2D" parent="."]
collision_mask = 3

[node name="SafeSpotDetector" type="RayCast2D" parent="."]
target_position = Vector2(0, 18)
collision_mask = 4

[node name="ExplosionSprite" type="AnimatedSprite2D" parent="."]
z_index = 20
z_as_relative = false
sprite_frames = SubResource("SpriteFrames_v4p53")
animation = &"explode"

[node name="StateMachine" type="Node" parent="." node_paths=PackedStringArray("initial_state")]
script = ExtResource("2_se5fe")
initial_state = NodePath("Idle")

[node name="Idle" type="Node" parent="StateMachine" node_paths=PackedStringArray("cat")]
script = ExtResource("3_t8pth")
cat = NodePath("../..")
metadata/_custom_type_script = "uid://c5ddufvbbox2a"

[node name="IdleTimer" type="Timer" parent="StateMachine/Idle"]
wait_time = 4.0
one_shot = true

[node name="Rest" type="Node" parent="StateMachine" node_paths=PackedStringArray("cat")]
script = ExtResource("4_cxap7")
cat = NodePath("../..")
metadata/_custom_type_script = "uid://br5t2hcrc517h"

[node name="Move" type="Node" parent="StateMachine" node_paths=PackedStringArray("cat")]
script = ExtResource("5_tol8a")
cat = NodePath("../..")
metadata/_custom_type_script = "uid://cvjrvysg6a8vi"

[node name="Jump" type="Node" parent="StateMachine" node_paths=PackedStringArray("cat")]
script = ExtResource("6_8px16")
cat = NodePath("../..")
metadata/_custom_type_script = "uid://co8kt33erkkw1"

[node name="Ascend" type="Node" parent="StateMachine" node_paths=PackedStringArray("cat")]
script = ExtResource("7_kedyd")
cat = NodePath("../..")
metadata/_custom_type_script = "uid://dng8exwii4i35"

[node name="Land" type="Node" parent="StateMachine" node_paths=PackedStringArray("cat")]
script = ExtResource("8_v4p53")
cat = NodePath("../..")
metadata/_custom_type_script = "uid://d4mrj0paa7rf2"

[node name="Fall" type="Node" parent="StateMachine" node_paths=PackedStringArray("cat")]
script = ExtResource("9_32af4")
cat = NodePath("../..")
metadata/_custom_type_script = "uid://nrxrumugwxxb"

[connection signal="Died" from="." to="." method="_on_died"]
[connection signal="timeout" from="StateMachine/Idle/IdleTimer" to="StateMachine/Idle" method="_on_idle_timer_timeout"]
